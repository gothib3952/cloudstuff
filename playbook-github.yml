---
- name: "Playing with Ansible from a downloaded playbook"
  hosts: localhost
  connection: local
  tasks:

    - name: "just execute a ls -alrt command"
      shell: "ls -alrt"
      register: result

    - name: "Print environment variable"
      debug:
        var: result.stdout_lines

    - name: "install stuff"
      package:
        name: "{{ item }}"
        state: present
      loop:
        - tree
        - yamllint

    - name: "Creating empty files"
      file:
        path: "{{ item }}"
        mode: 0644
        state: touch
      loop:
        - "/root/environmental_vars2"

    - name: "some content for /root/environmental_vars2"
      blockinfile:
        path: "/root/environmental_vars"
        block: |
          $HOME = "{{ lookup('env','HOME') }}"
          $USER = "{{ lookup('env','USER') }}"
          $INTERFACE = "{{ lookup('env','INTERFACE') }}"
          $IP_ADDRESS = "{{ lookup('env','IP_ADDRESS') }}"
          $IP6_ADDRESS = "{{ lookup('env','IP6_ADDRESS') }}"
